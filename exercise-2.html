<html>
<head>
<title>Exercise 2</title>
<link rel="stylesheet" href="styles.css">
</head>
<body>
<h2>Exercise 2. Lambdas from scratch.</h2>

<h3>Exercise 2a. Sizeof lambda.</h3>

<p>
Open <a href="https://wandbox.org/permlink/jk3Ff6gIhogtCm9c">this wandbox</a>
(<a href="2a.cc">backup</a>).

<p>
1. The <code>main</code> routine contains 16 test cases in 8 sets. Before you run each set,
decide what you think the output is going to be. What is the expected <code>sizeof</code>
each lambda? What is the expected return value? Does the return value change if
you call it a second time?

<p>
2. Notice that none of the lambdas have size zero. This is because no C++ object is allowed
to have size zero. Modify the program so that <code>test</code> prints out <code>"empty"</code>
for types where <code>std::is_empty_v&lt;F&gt;</code> and <code>"not empty"</code>
for other types. Run each of the 16 test cases again. Do the results make sense?

<p>
(The variable template <code>std::is_empty_v&lt;F&gt;</code> is declared in
<code>&lt;type_traits&gt;</code>. If you're using a pre-C++17 compiler, try
<code>std::is_empty&lt;F&gt;::value</code> instead.)

<p>
3. Change the definition of <code>test</code> so that it is no longer a template, but simply
takes a single parameter of type <code>std::function&lt;int()&gt;</code>. What output do
you expect now? Do you expect the output to be different between Clang and GCC? Try it.
Maybe try the same code <a href="http://rextester.com/UPNLNI34850">on Rextester</a>.




<p>
You're done with the second set of exercises! Sit back and relax, or optionally,
browse the following blog posts.

<ul>
<li><a href="http://www.ryanjuckett.com/programming/printing-floating-point-numbers/">"Printing Floating-Point Numbers". Ryan Juckett, 2014.</a></li>
<li><a href="http://refspecs.linuxbase.org/cxxabi-1.83.html">On the innards of the Linux/OSX C++ object model</a></li>
<li><a href="http://bit.ly/open-watcom-class-layout">Notes on class layout in MSVC. JWW, 1991.</a></li>
<li><a href="https://www.openrce.org/articles/full_view/23">"Reversing Microsoft Visual C++ Part II: Classes, Methods and RTTI". igorsk, 2006.</a></li>
</ul>

</body>
</html>
